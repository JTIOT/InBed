@using System.Text
@using InBed.Service.Enum
@using InBed.Service.Dto
@{
    Layout = null;
    List<MenuDto> myMenus = ViewBag.MyMenus;
}
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html class=" ">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta charset="utf-8" />
    <title>居家養老智能看護平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="" name="description" />
    <meta content="" name="author" />

    <!-- CORE CSS FRAMEWORK - START -->
    @*<link href="~/assets/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" media="screen" />*@
    <link href="~/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/fonts/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/animate.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" type="text/css" />
    <!-- CORE CSS FRAMEWORK - END -->
    <!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - START -->
  
    <!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - END -->
    <!-- CORE CSS TEMPLATE - START -->
    <link href="~/assets/css/style.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/css/index.css" rel="stylesheet" type="text/css" />
    <!-- CORE CSS TEMPLATE - END -->

</head>

<body  style="background:url(../../../../../assets/images/background.png)  no-repeat center center fixed;
            background-size: cover;">
    <!-- START TOPBAR -->
    <div class='page-topbar '>
        <div class='logo-area'>
        </div>
        <div class='quick-area'>
            <div class='pull-left'>
                <ul class="info-menu left-links list-inline list-unstyled">
                    <li class="">
                        <a href="#" data-toggle="sidebar" class="sidebar_toggle">
                            <i class="fa fa-bars"></i>
                        </a>
                    </li>
                    <li class="">
                        <a href="#" data-toggle="dropdown" class="toggle">
                            <i class="fa fa-envelope"></i>
                            <span class="badge badge-primary">0</span>
                        </a>
                        <ul class="dropdown-menu messages animated fadeIn">
                            <li class="list">
                                <ul class="dropdown-menu-list list-unstyled ps-scrollbar">
                                    
                                </ul>
                            </li>
                            <li class="external">
                                <a href="javascript:;">
                                    @*<span>Read All Messages</span>*@
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="">
                        <audio id="bgMusic">
                            <source  src="~/assets/Images/alarm.mp3" type="audio/mp3">
                        </audio>
                        <a href="#" data-toggle="dropdown" class="toggle">
                            <i class="fa fa-bell alarm-bell"></i>
                            <span class="badge badge-orange alarmCount"></span>
                        </a>
                        <ul class="dropdown-menu notifications animated fadeIn">
                            <li class="total">
                                <span class="small">
                                    你有 <strong class="alarmCount"></strong> 條告警未處理.
                                    @*<a href="javascript:;" class="pull-right">Mark all as Read</a>*@
                                </span>
                            </li>
                            <li class="list">
                                <ul class="dropdown-menu-list list-unstyled ps-scrollbar alarm-list">


                                </ul>
                            </li>
                            <li class="external">
                                <a href="javascript:;">
                                    @*<span>Read All Notifications</span>*@
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="">
                        <audio id="bgMusic">
                            <source src="~/assets/Images/alarm.mp3" type="audio/mp3">
                        </audio>
                        <a href="#" data-toggle="dropdown" class="toggle">
                            <i class="fa fa-bell alarm-bell"></i>
                            <span class="badge badge-orange alarmCount"></span>
                        </a>
                        <ul class="dropdown-menu notifications animated fadeIn">
                            <li class="total">
                                <span class="small">
                                    你有 <strong class="alarmCount"></strong> 條告警未處理.
                                    @*<a href="javascript:;" class="pull-right">Mark all as Read</a>*@
                                </span>
                            </li>
                            <li class="list">
                                <ul class="dropdown-menu-list list-unstyled ps-scrollbar alarm-list"></ul>
                            </li>
                            <li class="external">
                                <a href="javascript:;">
                                    @*<span>Read All Notifications</span>*@
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li id="elderQueryBox" class="hidden-sm hidden-xs searchform">
                        <div class="input-group">
                            <span id="elderQuery" class="input-group-addon input-focus">
                                <i class="fa fa-search"></i>
                            </span>
                            <span>
                                <input type="text" id="elderQueryText" class="form-control animated fadeIn" placeholder="請輸入老人姓名" autocomplete="off">
                                <input type='submit' value="">
                            </span>
                        </div>
                    </li>
                </ul>
            </div>
            <div class='pull-right'>
                <ul class="info-menu right-links list-inline list-unstyled">
                    <li class="profile">
                        <a href="#" data-toggle="dropdown" class="toggle">
                            <img src="~/assets/Images/profile.png" alt="user-image" class="img-circle img-inline">
                            <span>@HttpContext.Current.User.Identity.Name.Split('#')[2] <i class="fa fa-angle-down"></i></span>
                        </a>
                        
                        <ul class="dropdown-menu profile animated fadeIn">
                           <!-- <li>
                                <a href="#settings">
                                    <i class="fa fa-wrench"></i>
                                    Settings
                                </a>
                            </li>
                            <li>
                                <a href="#profile">
                                    <i class="fa fa-user"></i>
                                    Profile
                                </a>
                            </li>
                            <li>
                                <a href="#help">
                                    <i class="fa fa-info"></i>
                                    Help
                                </a>
                            </li>-->
                            <li class="last logout">
                                <a href="/Home/Index">
                                    <i class="fa fa-lock"></i>
                                    退出登錄
                                </a>
                            </li>
                        </ul>
                            
                    </li>
                <!--
                <li class="chat-toggle-wrapper">
                    <a href="#" data-toggle="chatbar" class="toggle_chat">
                        <i class="fa fa-comments"></i>
                        <span class="badge badge-warning">9</span>
                    </a>
                </li>
                -->   
                </ul>
            </div>
        </div>
    </div>
    <!-- END TOPBAR -->
    <!-- START CONTAINER -->
    <div class="page-container row-fluid">
        <!-- SIDEBAR - START -->
        <div class="page-sidebar ">

            <!-- MAIN MENU - START -->
            <div class="page-sidebar-wrapper" id="main-menu-wrapper">
                <!-- USER INFO - START -->
                <div class="profile-info row">
                    <div class="profile-image col-md-4 col-sm-4 col-xs-4">
                        <a href="#">
                            <img src="~/assets/Images/profile.png" class="img-responsive img-circle">
                        </a>
                    </div>
                    <div class="profile-details col-md-8 col-sm-8 col-xs-8">
                        <h3>
                            <a href="ui-profile.html">@HttpContext.Current.User.Identity.Name.Split('#')[2]</a>
                            <!-- Available statuses: online, idle, busy, away and offline -->
                            <span class="profile-status online"></span>
                        </h3>
                       
                    </div>
                </div>
                <!-- USER INFO - END -->

                <ul id="InBedMenu" class='wraplist'>
                    <li class="">
                        <a href="javascript:;" data-url="/Adm/Control/Welcome" >
                            <i class="fa fa-home"></i>
                            <span class="title">主頁</span>
                        </a>
                    </li>
                    @if (myMenus != null && myMenus.Any())
                    {
                        StringBuilder sb = new StringBuilder();
                        var models = myMenus.Where(item => item.Type == MenuType.模块);
                        foreach (var m in models)
                        {
                            var menus = myMenus.Where(item => item.ParentId == m.Id && item.Type == MenuType.菜单);
                            sb.Append("<li class=\"\">");
                            // sb.AppendFormat("<a href=\"javascript:;\" data-url=\"{0}/{1}/{2}/0\"><i class=\"fa {4}\"></i> <span>{3}</span><span class=\"label label - orange nosubmenu\">HOT</span></a>", m.Url, m.ParentId, m.Id, m.Name, m.Icon);
                            sb.AppendFormat(" <a href=\"javascript:;\"  data-url=\"{0}/{1}/{2}/0\" ><i class=\"fa {4}\"></i><span class=\"title\">{3}</span><span class=\"arrow \"></span></a>", m.Url, m.ParentId, m.Id, m.Name, m.Icon);
                            if (menus != null && menus.Any())
                            {
                                sb.Append("<ul class=\"sub-menu\">");
                                foreach (var menu in menus)
                                {
                                    sb.AppendFormat("<li><a href=\"javascript:;\" data-url=\"{0}/{1}/{2}/0\"> {3}</a></li>", menu.Url, menu.ParentId, menu.Id, menu.Name);
                                }
                                sb.Append("</ul>");
                            }
                            sb.Append("</li>");
                        }
                        @(new MvcHtmlString(sb.ToString()))
                    }

                </ul>
            </div>
            <!-- MAIN MENU - END -->
            
            <!--
            <div class="project-info">
                <div class="block1">
                    <div class="data">
                        <span class='title'>New&nbsp;Orders</span>
                        <span class='total'>2,345</span>
                    </div>
                    <div class="graph">
                        <span class="sidebar_orders">...</span>
                    </div>
                </div>
                <div class="block2">
                    <div class="data">
                        <span class='title'>Visitors</span>
                        <span class='total'>345</span>
                    </div>
                    <div class="graph">
                        <span class="sidebar_visitors">...</span>
                    </div>
                </div>
            </div>
            -->
        </div>
        <!--  SIDEBAR - END -->
        <!-- START CONTENT -->
        <section id="main-content" class=" ">
            <section class="wrapper" style="height: 600px; margin-top:60px;display:inline-block;width:100%;padding:0;"  >
                @RenderBody()
                <iframe id="txtContentBody" style="width:calc(100%); height: 93%; border: 0; margin: 0; padding: 0; min-height: 400px;" src="@Url.Action("Welcome","Control",new { moudleId = 0, menuId = 0 , btnId = 0})"></iframe>
             
            </section>
        </section>
        <!-- END CONTENT -->
        <div class="page-chatapi hideit">
            <div class="search-bar">
                <input type="text" placeholder="Search" class="form-control">
            </div>
            <div class="chat-wrapper">
                <h4 class="group-head">Groups</h4>
                <ul class="group-list list-unstyled">
                    <li class="group-row">
                        <div class="group-status available">
                            <i class="fa fa-circle"></i>
                        </div>
                        <div class="group-info">
                            <h4><a href="#">Work</a></h4>
                        </div>
                    </li>
                    <li class="group-row">
                        <div class="group-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                        <div class="group-info">
                            <h4><a href="#">Friends</a></h4>
                        </div>
                    </li>
                </ul>

                <h4 class="group-head">Favourites</h4>
                <ul class="contact-list">
                    <li class="user-row" id='chat_user_1' data-user-id='1'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-1.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Clarine Vassar</a></h4>
                            <span class="status available" data-status="available"> Available</span>
                        </div>
                        <div class="user-status available">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_2' data-user-id='2'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-2.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Brooks Latshaw</a></h4>
                            <span class="status away" data-status="away"> Away</span>
                        </div>
                        <div class="user-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_3' data-user-id='3'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-3.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Clementina Brodeur</a></h4>
                            <span class="status busy" data-status="busy"> Busy</span>
                        </div>
                        <div class="user-status busy">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                </ul>

                <h4 class="group-head">More Contacts</h4>
                <ul class="contact-list">
                    <li class="user-row" id='chat_user_4' data-user-id='4'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-4.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Carri Busey</a></h4>
                            <span class="status offline" data-status="offline"> Offline</span>
                        </div>
                        <div class="user-status offline">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_5' data-user-id='5'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-5.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Melissa Dock</a></h4>
                            <span class="status offline" data-status="offline"> Offline</span>
                        </div>
                        <div class="user-status offline">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_6' data-user-id='6'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-1.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Verdell Rea</a></h4>
                            <span class="status available" data-status="available"> Available</span>
                        </div>
                        <div class="user-status available">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_7' data-user-id='7'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-2.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Linette Lheureux</a></h4>
                            <span class="status busy" data-status="busy"> Busy</span>
                        </div>
                        <div class="user-status busy">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_8' data-user-id='8'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-3.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Araceli Boatright</a></h4>
                            <span class="status away" data-status="away"> Away</span>
                        </div>
                        <div class="user-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_9' data-user-id='9'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-4.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Clay Peskin</a></h4>
                            <span class="status busy" data-status="busy"> Busy</span>
                        </div>
                        <div class="user-status busy">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_10' data-user-id='10'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-5.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Loni Tindall</a></h4>
                            <span class="status away" data-status="away"> Away</span>
                        </div>
                        <div class="user-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_11' data-user-id='11'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-1.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Tanisha Kimbro</a></h4>
                            <span class="status idle" data-status="idle"> Idle</span>
                        </div>
                        <div class="user-status idle">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row" id='chat_user_12' data-user-id='12'>
                        <div class="user-img">
                            <a href="#"><img src="~/assets/Images/profile/avatar-2.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Jovita Tisdale</a></h4>
                            <span class="status idle" data-status="idle"> Idle</span>
                        </div>
                        <div class="user-status idle">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="chatapi-windows ">

        </div>
        <div class="alarm-windows ">

        </div>
    </div>
    <!-- CORE JS FRAMEWORK - START -->
    <script>
        

    </script>

    <script src="~/assets/js/jquery-1.11.2.min.js" type="text/javascript"></script>
    <script src="~/assets/js/jquery.easing.min.js" type="text/javascript"></script>
    <script src="~/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    @*<script src="~/assets/plugins/pace/pace.min.js" type="text/javascript"></script>*@
    <script src="~/assets/plugins/perfect-scrollbar/perfect-scrollbar.min.js" type="text/javascript"></script>
    <script src="~/assets/plugins/viewport/viewportchecker.js" type="text/javascript"></script>
    <!-- CORE JS FRAMEWORK - END -->
    <!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - START -->

    <!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - END -->
    <!-- CORE TEMPLATE JS - START -->
    <script src="~/assets/js/scripts.js" type="text/javascript"></script>
    <script src="~/assets/js/syiot.js" type="text/javascript"></script>
    <script src="~/assets/js/index-alarm.js" type="text/javascript"></script>
   
    <!-- END CORE TEMPLATE JS - END -->
    <!-- Sidebar Graph - START -->
    <script src="~/assets/plugins/sparkline-chart/jquery.sparkline.min.js" type="text/javascript"></script>
    <script src="~/assets/js/chart-sparkline.js" type="text/javascript"></script> 
    <!-- Sidebar Graph - END -->

    <script src="~/assets/js/layer/layer.js" type="text/javascript"></script>
    <script src="~/assets/js/InBed.menu.js" type="text/javascript"></script>
    <script src="~/assets/plugins/MD5js/md5.min.js" type="text/javascript"></script>
    

   
    <script>

        //function setIframeHeight(iframeId) {
        //    var cwin = document.getElementById(iframeId);
        //    if (document.getElementById) {
        //        if (cwin && !window.opera) {
        //            if (cwin.contentDocument && cwin.contentDocument.body.offsetHeight) {
        //                cwin.height = cwin.contentDocument.body.offsetHeight + 20; //FF NS   
        //            }
        //            else if (cwin.Document && cwin.Document.body.scrollHeight) {
        //                cwin.height = cwin.Document.body.scrollHeight + 10;//IE   
        //            }
        //        } else {
        //            if (cwin.contentWindow.document && cwin.contentWindow.document.body.scrollHeight)
        //                cwin.height = cwin.contentWindow.document.body.scrollHeight;//Opera   
        //        }
        //    }
        //};

        //function iframeLoad() {
        //    document.getElementById("txtContentBody").height = 0;
        //    document.getElementById("txtContentBody").height = document.getElementById("txtContentBody").contentWindow.document.body.scrollHeight;
        //}


        //function SetPageHeight() {
        //    var iframe = getUrlParam('iframe');
        //    var myiframe = window.parent.document.getElementById(txtContentBody);
        //     iframeLoaded(myiframe);
        //}
        //var iframeLoaded = function (iframe) {
        //    if (iframe.src.length > 0) {
        //        if (!iframe.readyState || iframe.readyState == "complete") {
        //            var bHeight =
        //            iframe.contentWindow.document.body.scrollHeight;
        //            var dHeight =
        //            iframe.contentWindow.document.documentElement.scrollHeight;
        //            var height = Math.max(bHeight, dHeight);
        //            iframe.height = height;
        //        }
        //    }
        //}


        //显示loading提示
        var firstLoading = layer.load(2);
        window.onload = function() {
            setInterval(function () { layer.close(firstLoading); }, 1000);
        }
    </script>

    <!-- General section box modal start -->
    <div class="modal" id="section-settings" tabindex="-1" role="dialog" aria-labelledby="ultraModal-Label" aria-hidden="true">
        <div class="modal-dialog animated bounceInDown">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Section Settings</h4>
                </div>
                <div class="modal-body">
                    Body goes here...

                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                    <button class="btn btn-success" type="button">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
